\ProvidesExplFile{ztex.module.counter.tex}
  {2025/09/23}{\ztex@versi@n}
  {counter~module~for~ztex}


%%%%%     counter module for ztex     %%%%%
\NewDocumentCommand{\ztexcntwith}{mm}{\@addtoreset{#1}{#2}}


% ==> counter spec
% \setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\setcounter{secnumdepth}{3}
\counterwithin{equation}{section}


% ==> counter form
\cs_new:Npn \zcnt_to_arabic:N #1 
  {
    \exp_after:wN \def \cs:w the#1 \cs_end:
      { \exp_args:Ne \arabic{#1} }
  }
\cs_generate_variant:Nn \zcnt_to_arabic:N { c }

% create counter safely
\cs_new_protected:Npn \zcnt_safe_new:nn #1#2
  {
    \cs_if_exist:cF { c@#1 }
      {
        \tl_if_empty:nTF { #2 }
          {
            \newcounter{ #1 }
          }{
            \newcounter{ #1 }[ #2 ]
          }
      }
  }
\cs_generate_variant:Nn \zcnt_safe_new:nn
  { oo, ee }
\NewDocumentCommand{\zcntnew}{mO{}}
  {
    \zcnt_safe_new:nn {#1}{#2}
  }
