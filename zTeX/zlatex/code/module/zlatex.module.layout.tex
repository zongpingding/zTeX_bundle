\ProvidesExplFile{zlatex.module.layout.tex}{2025/04/21}{1.0.1}{layout~module~for~zlatex}


%%%%%     layout module for zlatex     %%%%%
\RequirePackage{geometry}
\cs_set:Npn \__zlatex_layout_setup:n #1
  {% cus pagelayout cmd '\setuplayout' is 
  % kind of different from '\geometry'.
    \@ifpackageloaded{cus}
      { \setuplayout{#1} }
      { \geometry{#1} }
  }

% document mode
\if@twoside 
  \bool_if:NTF \g__zlatex_margin_bool {
    \__zlatex_layout_setup:n {
      a4paper, 
      left=2.5cm, right=7.5cm, 
      bottom=3.5cm, top=3.2cm, 
      headsep=.3cm, footskip=1.5cm, 
      marginparsep=2em
    }
    \dim_gset:Nn \marginparwidth{14em}
  }{
    \__zlatex_layout_setup:n {
      a4paper, 
      left=3cm, right=5.5cm, 
      bottom=3.5cm, top=3.2cm, 
      headsep=.3cm, footskip=1.5cm, 
      marginparsep=1em
    }
    \zlatex_msg_set:nn {option-page-margin}
      {No~margin~option~is~only~accessible~in~oneside~layout,
      ~margin~option~is~now~enabled~by~default.}
    \zlatex_msg_warn:n {option-page-margin}
  }
\else 
  \bool_if:NTF \g__zlatex_margin_bool {
    \__zlatex_layout_setup:n {
      a4paper, 
      left=2.5cm, right=7.5cm, 
      bottom=3.5cm, top=3.2cm, 
      headsep=.3cm, footskip=1.5cm, 
      marginparsep=2em
    }
    \dim_gset:Nn \marginparwidth{14em}
  }{
    \__zlatex_layout_setup:n {
      a4paper, 
      left=3cm, right=3cm, 
      bottom=3.5cm, top=3.2cm, 
      headsep=.3cm, footskip=1.5cm, 
      marginparsep=1em
    }
    \renewcommand{\marginpar}[1]{\leftbar\noindent#1\endleftbar}
  }
\fi